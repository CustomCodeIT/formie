{% set html %}
    {% set handle = attrs.handle %}
    {% set labelPosition = craft.formie.getLabelPosition(field, form, true) %}
    {% set inputId = handle | namespaceInputId(options.id) %}
    {% set placeholder = attribute(field, handle ~ 'Placeholder') %}

    {% if handle == 'ampm' %}
        {% set selected = value %}
    {% else %}
        {% set selected = value ? (value | date(char) * 1) : null %}
    {% endif %}

    {% include '_label' with {
        field: null,
        id: inputId,
        required: field.required ? true : false,
        fieldName: attribute(field, handle ~ 'Label'),
        position: 'above',
    } %}

    <div class="fui-name-container">
        {% set attributes = {
            id: inputId,
            class: [ 'fui-select' ],
            name: char | namespaceInputName(field.handle),
            required: field.required ? true : false,
            aria: {
                required: field.required ? 'true' : 'false',
            },
        } %}

        <select {{ attr(attributes) }}>
            {% if placeholder %}
                <option value="" disabled {{- not selected ? ' selected' }}>{{ placeholder }}</option>
            {% endif %}

            {% if attrs.options is defined %}
                {% for option in attrs.options %}
                    <option value="{{ option.value }}" {{- option.value == selected ? ' selected' }}>{{ option.label }}</option>
                {% endfor %}
            {% else %}
                {% for i in attrs.min..attrs.max %}
                    <option value="{{ i }}" {{- i == selected ? ' selected' }}>{{ i }}</option>
                {% endfor %}
            {% endif %}
        </select>
    </div>

    {% include '_label' with {
        field: null,
        id: inputId,
        required: field.required ? true : false,
        fieldName: attribute(field, handle ~ 'Label'),
        position: 'below',
    } %}
{% endset %}

{% set attributes = {
    class: [
        'fui-field',
        'fui-select-field',
        'fui-date-field',
        'fui-date-' ~ (handle | replace('/([A-Z])/', '-$1') | lower),
    ],
    html: html,
} %}

{{ tag(options.renderOptions.fieldTag ?? 'div', attributes) }}
