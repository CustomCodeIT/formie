/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "../../../../node_modules/@rynpsc/dialog/dist/module/dialog.js":
/*!*********************************************************************!*\
  !*** ../../../../node_modules/@rynpsc/dialog/dist/module/dialog.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"dialog\": () => (/* binding */ m),\n/* harmony export */   \"domapi\": () => (/* binding */ u),\n/* harmony export */   \"getInstanceById\": () => (/* binding */ f),\n/* harmony export */   \"instances\": () => (/* binding */ s)\n/* harmony export */ });\nconst e=[\"input\",\"select\",\"textarea\",\"button\",\"summary\",\"a[href]\",\"area[href]\",\"embed\",\"iframe\",\"object\",\"audio[controls]\",\"video[controls]\",'[contenteditable]:not([contenteditable=\"false\"])'];function t(e,t=!1){\"function\"==typeof e.focus&&e.focus({preventScroll:!t})}function n(e,n=!1){const r=o(e);if(!r.length)return!1;t(r[0],n)}function o(t){return Array.from(t.querySelectorAll(e.join(\",\"))).filter(t=>function(t){let n=parseInt(t.getAttribute(\"tabindex\")||\"\",10);if(t.hidden||n&&n<0||t.matches(\":disabled\")||!t.matches(e.join(\",\"))||r(t)&&!function(e){if(!r(e))return!1;let t=e.form||document;if(!Array.from(t.getElementsByName(e.name)).some(e=>e.checked))return!0;return e.checked}(t)||!function(e){if(0===e.getClientRects().length)return!1;return\"visible\"===window.getComputedStyle(e).visibility}(t))return!1;return!0}(t))}function r(e){return e instanceof HTMLInputElement&&\"radio\"===e.type}let i,a;function l(e){let{currentTarget:t}=e;if(!(t instanceof HTMLElement&&t.dataset.dialogOpen))return;let n=f(t.dataset.dialogOpen);n&&(n.open(),e.preventDefault())}function c(e){let{currentTarget:t}=e;if(!(t instanceof HTMLElement&&t.dataset.dialogClose))return;let n=f(t.dataset.dialogClose);n&&(n.close(),e.preventDefault())}var u=Object.freeze({__proto__:null,get openers(){return i},get closers(){return a},mount:function(){i=Array.from(document.querySelectorAll(\"[data-dialog-open]\")),a=Array.from(document.querySelectorAll(\"[data-dialog-close]\")),i.forEach(e=>e.addEventListener(\"click\",l)),a.forEach(e=>e.addEventListener(\"click\",c))},unmount:function(){i=[],a=[],i.forEach(e=>e.removeEventListener(\"click\",l)),a.forEach(e=>e.removeEventListener(\"click\",c))}});const d={alert:!1,description:void 0,label:\"Dialog\",manageFocus:!0,openClass:\"is-open\"},s={};function f(e){return void 0===e?null:Object.prototype.hasOwnProperty.call(s,e)?s[e]:null}function m(e,r={}){let i,a=!1,l=!1,c=document.getElementById(e);if(!c)return;if(s.hasOwnProperty(e))return s[e];const u=Object.assign({},d,r);function f(e){\"Escape\"===e.key&&v()}function m(e,t=!0){!a&&l&&b(\"open\")&&(a=!0,c.classList.add(u.openClass),document.addEventListener(\"keydown\",f,!0),i&&(void 0===e&&null!==c.querySelector(\"[data-dialog-autofocus]\")&&(e=c.querySelector(\"[data-dialog-autofocus]\")),i.activate(e,t)))}function v(e,t=!0){a&&l&&b(\"close\")&&(i&&i.deactivate(e,t),a=!1,document.removeEventListener(\"keydown\",f,!0),c.classList.remove(u.openClass))}function b(t){let n=new CustomEvent(\"dialog:\"+t,{bubbles:!0,cancelable:!0,detail:{id:e}});return c.dispatchEvent(n)}u.manageFocus&&(i=function(e){let r=!1,i=null,a=null;function l(o){let r=o.target;if(e.contains(r))return o.stopPropagation(),void(i=r);o.preventDefault(),i?t(i,!0):n(e,!0)}function c(n){\"Tab\"!==n.key||n.altKey||n.ctrlKey||n.metaKey||function(e,n){let r=document.activeElement,i=o(e),a=i[0],l=i[i.length-1];n.shiftKey&&r==a?(t(l,!0),n.preventDefault()):n.shiftKey||r!=l||(t(a,!0),n.preventDefault())}(e,n)}return{activated:r,activate:function(o,i=!1){r||(a=document.activeElement,o?t(o,i):null!==o&&n(e,i),document.addEventListener(\"focusin\",l,!1),document.addEventListener(\"keydown\",c,!1),r=!0)},deactivate:function(e,n=!1){if(!r)return;document.removeEventListener(\"focusin\",l,!1),document.removeEventListener(\"keydown\",c,!1);let o=e||(null!==e?a:null);o&&t(o,n),r=!1,i=null}}}(c));const p={close:v,create:function(){if(l)return!1;let e=u.alert?\"alertdialog\":\"dialog\";if(c.setAttribute(\"tabindex\",\"-1\"),c.setAttribute(\"role\",e),c.setAttribute(\"aria-modal\",\"true\"),u.label){let e=document.getElementById(u.label)?\"aria-labelledby\":\"aria-label\";c.setAttribute(e,u.label)}u.description&&document.getElementById(u.description)&&c.setAttribute(\"aria-describedby\",u.description),l=!0,b(\"create\")},destroy:function(){if(!l)return!1;v(),l=!1,[\"role\",\"tabindex\",\"aria-modal\",\"aria-label\",\"aria-labelledby\",\"aria-describedby\"].forEach(e=>c.removeAttribute(e)),b(\"destroy\")},element:c,id:e,initiated:l,get isOpen(){return a},off:function(e,t){let n=\"dialog:\"+e;c.removeEventListener(n,t)},on:function(e,t){let n=\"dialog:\"+e;c.addEventListener(n,t)},open:m,toggle:function(e=!a){e?m():v()}};return s[e]=p}\n//# sourceMappingURL=dialog.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByeW5wc2MvZGlhbG9nL2Rpc3QvbW9kdWxlL2RpYWxvZy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsaU1BQWlNLG1CQUFtQixxQ0FBcUMsaUJBQWlCLEVBQUUsbUJBQW1CLGFBQWEsc0JBQXNCLFVBQVUsY0FBYyx5RUFBeUUsa0RBQWtELHlGQUF5RixrQkFBa0IsdUJBQXVCLHdFQUF3RSxpQkFBaUIsa0JBQWtCLDBDQUEwQyx3REFBd0QsYUFBYSxTQUFTLEtBQUssY0FBYyx1REFBdUQsUUFBUSxjQUFjLElBQUksZ0JBQWdCLEdBQUcsNERBQTRELDhCQUE4QixpQ0FBaUMsY0FBYyxJQUFJLGdCQUFnQixHQUFHLDZEQUE2RCwrQkFBK0Isa0NBQWtDLHFCQUFxQiw2QkFBNkIsU0FBUyxlQUFlLFNBQVMsa0JBQWtCLHFOQUFxTixvQkFBb0IseUdBQXlHLEVBQUUsU0FBUyw4RUFBOEUsTUFBTSxjQUFjLDJFQUEyRSxpQkFBaUIsRUFBRSw2Q0FBNkMsYUFBYSxtQ0FBbUMsd0JBQXdCLE1BQU0sY0FBYyxzQkFBc0IsbUJBQW1CLG1PQUFtTyxtQkFBbUIsMkhBQTJILGNBQWMsbUNBQW1DLGlDQUFpQyxNQUFNLEVBQUUsMEJBQTBCLDhCQUE4Qix1QkFBdUIsY0FBYyxlQUFlLHNEQUFzRCxxQ0FBcUMsY0FBYyw2REFBNkQsMkRBQTJELDZGQUE2RixNQUFNLE9BQU8sc0NBQXNDLGlKQUFpSiw2QkFBNkIsYUFBYSwwRkFBMEYsMkJBQTJCLHdCQUF3QixLQUFLLFNBQVMsMEJBQTBCLGNBQWMscUNBQXFDLHlHQUF5RyxzRUFBc0UsMEJBQTBCLHlIQUF5SCxvQkFBb0IsZUFBZSwwSUFBMEkseUNBQXlDLFNBQVMsbUJBQW1CLGtCQUFrQiwyQkFBMkIsa0JBQWtCLGtCQUFrQix3QkFBd0IsOEJBQThCLFlBQVksY0FBa0Y7QUFDdm1JIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AcnlucHNjL2RpYWxvZy9kaXN0L21vZHVsZS9kaWFsb2cuanM/Y2IwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBlPVtcImlucHV0XCIsXCJzZWxlY3RcIixcInRleHRhcmVhXCIsXCJidXR0b25cIixcInN1bW1hcnlcIixcImFbaHJlZl1cIixcImFyZWFbaHJlZl1cIixcImVtYmVkXCIsXCJpZnJhbWVcIixcIm9iamVjdFwiLFwiYXVkaW9bY29udHJvbHNdXCIsXCJ2aWRlb1tjb250cm9sc11cIiwnW2NvbnRlbnRlZGl0YWJsZV06bm90KFtjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiXSknXTtmdW5jdGlvbiB0KGUsdD0hMSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZS5mb2N1cyYmZS5mb2N1cyh7cHJldmVudFNjcm9sbDohdH0pfWZ1bmN0aW9uIG4oZSxuPSExKXtjb25zdCByPW8oZSk7aWYoIXIubGVuZ3RoKXJldHVybiExO3QoclswXSxuKX1mdW5jdGlvbiBvKHQpe3JldHVybiBBcnJheS5mcm9tKHQucXVlcnlTZWxlY3RvckFsbChlLmpvaW4oXCIsXCIpKSkuZmlsdGVyKHQ9PmZ1bmN0aW9uKHQpe2xldCBuPXBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIil8fFwiXCIsMTApO2lmKHQuaGlkZGVufHxuJiZuPDB8fHQubWF0Y2hlcyhcIjpkaXNhYmxlZFwiKXx8IXQubWF0Y2hlcyhlLmpvaW4oXCIsXCIpKXx8cih0KSYmIWZ1bmN0aW9uKGUpe2lmKCFyKGUpKXJldHVybiExO2xldCB0PWUuZm9ybXx8ZG9jdW1lbnQ7aWYoIUFycmF5LmZyb20odC5nZXRFbGVtZW50c0J5TmFtZShlLm5hbWUpKS5zb21lKGU9PmUuY2hlY2tlZCkpcmV0dXJuITA7cmV0dXJuIGUuY2hlY2tlZH0odCl8fCFmdW5jdGlvbihlKXtpZigwPT09ZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aClyZXR1cm4hMTtyZXR1cm5cInZpc2libGVcIj09PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUpLnZpc2liaWxpdHl9KHQpKXJldHVybiExO3JldHVybiEwfSh0KSl9ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJlwicmFkaW9cIj09PWUudHlwZX1sZXQgaSxhO2Z1bmN0aW9uIGwoZSl7bGV0e2N1cnJlbnRUYXJnZXQ6dH09ZTtpZighKHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCYmdC5kYXRhc2V0LmRpYWxvZ09wZW4pKXJldHVybjtsZXQgbj1mKHQuZGF0YXNldC5kaWFsb2dPcGVuKTtuJiYobi5vcGVuKCksZS5wcmV2ZW50RGVmYXVsdCgpKX1mdW5jdGlvbiBjKGUpe2xldHtjdXJyZW50VGFyZ2V0OnR9PWU7aWYoISh0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJnQuZGF0YXNldC5kaWFsb2dDbG9zZSkpcmV0dXJuO2xldCBuPWYodC5kYXRhc2V0LmRpYWxvZ0Nsb3NlKTtuJiYobi5jbG9zZSgpLGUucHJldmVudERlZmF1bHQoKSl9dmFyIHU9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsZ2V0IG9wZW5lcnMoKXtyZXR1cm4gaX0sZ2V0IGNsb3NlcnMoKXtyZXR1cm4gYX0sbW91bnQ6ZnVuY3Rpb24oKXtpPUFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWRpYWxvZy1vcGVuXVwiKSksYT1BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1kaWFsb2ctY2xvc2VdXCIpKSxpLmZvckVhY2goZT0+ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixsKSksYS5mb3JFYWNoKGU9PmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsYykpfSx1bm1vdW50OmZ1bmN0aW9uKCl7aT1bXSxhPVtdLGkuZm9yRWFjaChlPT5lLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGwpKSxhLmZvckVhY2goZT0+ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIixjKSl9fSk7Y29uc3QgZD17YWxlcnQ6ITEsZGVzY3JpcHRpb246dm9pZCAwLGxhYmVsOlwiRGlhbG9nXCIsbWFuYWdlRm9jdXM6ITAsb3BlbkNsYXNzOlwiaXMtb3BlblwifSxzPXt9O2Z1bmN0aW9uIGYoZSl7cmV0dXJuIHZvaWQgMD09PWU/bnVsbDpPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocyxlKT9zW2VdOm51bGx9ZnVuY3Rpb24gbShlLHI9e30pe2xldCBpLGE9ITEsbD0hMSxjPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpO2lmKCFjKXJldHVybjtpZihzLmhhc093blByb3BlcnR5KGUpKXJldHVybiBzW2VdO2NvbnN0IHU9T2JqZWN0LmFzc2lnbih7fSxkLHIpO2Z1bmN0aW9uIGYoZSl7XCJFc2NhcGVcIj09PWUua2V5JiZ2KCl9ZnVuY3Rpb24gbShlLHQ9ITApeyFhJiZsJiZiKFwib3BlblwiKSYmKGE9ITAsYy5jbGFzc0xpc3QuYWRkKHUub3BlbkNsYXNzKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLGYsITApLGkmJih2b2lkIDA9PT1lJiZudWxsIT09Yy5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtZGlhbG9nLWF1dG9mb2N1c11cIikmJihlPWMucXVlcnlTZWxlY3RvcihcIltkYXRhLWRpYWxvZy1hdXRvZm9jdXNdXCIpKSxpLmFjdGl2YXRlKGUsdCkpKX1mdW5jdGlvbiB2KGUsdD0hMCl7YSYmbCYmYihcImNsb3NlXCIpJiYoaSYmaS5kZWFjdGl2YXRlKGUsdCksYT0hMSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLGYsITApLGMuY2xhc3NMaXN0LnJlbW92ZSh1Lm9wZW5DbGFzcykpfWZ1bmN0aW9uIGIodCl7bGV0IG49bmV3IEN1c3RvbUV2ZW50KFwiZGlhbG9nOlwiK3Qse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCxkZXRhaWw6e2lkOmV9fSk7cmV0dXJuIGMuZGlzcGF0Y2hFdmVudChuKX11Lm1hbmFnZUZvY3VzJiYoaT1mdW5jdGlvbihlKXtsZXQgcj0hMSxpPW51bGwsYT1udWxsO2Z1bmN0aW9uIGwobyl7bGV0IHI9by50YXJnZXQ7aWYoZS5jb250YWlucyhyKSlyZXR1cm4gby5zdG9wUHJvcGFnYXRpb24oKSx2b2lkKGk9cik7by5wcmV2ZW50RGVmYXVsdCgpLGk/dChpLCEwKTpuKGUsITApfWZ1bmN0aW9uIGMobil7XCJUYWJcIiE9PW4ua2V5fHxuLmFsdEtleXx8bi5jdHJsS2V5fHxuLm1ldGFLZXl8fGZ1bmN0aW9uKGUsbil7bGV0IHI9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCxpPW8oZSksYT1pWzBdLGw9aVtpLmxlbmd0aC0xXTtuLnNoaWZ0S2V5JiZyPT1hPyh0KGwsITApLG4ucHJldmVudERlZmF1bHQoKSk6bi5zaGlmdEtleXx8ciE9bHx8KHQoYSwhMCksbi5wcmV2ZW50RGVmYXVsdCgpKX0oZSxuKX1yZXR1cm57YWN0aXZhdGVkOnIsYWN0aXZhdGU6ZnVuY3Rpb24obyxpPSExKXtyfHwoYT1kb2N1bWVudC5hY3RpdmVFbGVtZW50LG8/dChvLGkpOm51bGwhPT1vJiZuKGUsaSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIixsLCExKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLGMsITEpLHI9ITApfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKGUsbj0hMSl7aWYoIXIpcmV0dXJuO2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsbCwhMSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIixjLCExKTtsZXQgbz1lfHwobnVsbCE9PWU/YTpudWxsKTtvJiZ0KG8sbikscj0hMSxpPW51bGx9fX0oYykpO2NvbnN0IHA9e2Nsb3NlOnYsY3JlYXRlOmZ1bmN0aW9uKCl7aWYobClyZXR1cm4hMTtsZXQgZT11LmFsZXJ0P1wiYWxlcnRkaWFsb2dcIjpcImRpYWxvZ1wiO2lmKGMuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIixcIi0xXCIpLGMuc2V0QXR0cmlidXRlKFwicm9sZVwiLGUpLGMuc2V0QXR0cmlidXRlKFwiYXJpYS1tb2RhbFwiLFwidHJ1ZVwiKSx1LmxhYmVsKXtsZXQgZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh1LmxhYmVsKT9cImFyaWEtbGFiZWxsZWRieVwiOlwiYXJpYS1sYWJlbFwiO2Muc2V0QXR0cmlidXRlKGUsdS5sYWJlbCl9dS5kZXNjcmlwdGlvbiYmZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodS5kZXNjcmlwdGlvbikmJmMuc2V0QXR0cmlidXRlKFwiYXJpYS1kZXNjcmliZWRieVwiLHUuZGVzY3JpcHRpb24pLGw9ITAsYihcImNyZWF0ZVwiKX0sZGVzdHJveTpmdW5jdGlvbigpe2lmKCFsKXJldHVybiExO3YoKSxsPSExLFtcInJvbGVcIixcInRhYmluZGV4XCIsXCJhcmlhLW1vZGFsXCIsXCJhcmlhLWxhYmVsXCIsXCJhcmlhLWxhYmVsbGVkYnlcIixcImFyaWEtZGVzY3JpYmVkYnlcIl0uZm9yRWFjaChlPT5jLnJlbW92ZUF0dHJpYnV0ZShlKSksYihcImRlc3Ryb3lcIil9LGVsZW1lbnQ6YyxpZDplLGluaXRpYXRlZDpsLGdldCBpc09wZW4oKXtyZXR1cm4gYX0sb2ZmOmZ1bmN0aW9uKGUsdCl7bGV0IG49XCJkaWFsb2c6XCIrZTtjLnJlbW92ZUV2ZW50TGlzdGVuZXIobix0KX0sb246ZnVuY3Rpb24oZSx0KXtsZXQgbj1cImRpYWxvZzpcIitlO2MuYWRkRXZlbnRMaXN0ZW5lcihuLHQpfSxvcGVuOm0sdG9nZ2xlOmZ1bmN0aW9uKGU9IWEpe2U/bSgpOnYoKX19O3JldHVybiBzW2VdPXB9ZXhwb3J0e20gYXMgZGlhbG9nLHUgYXMgZG9tYXBpLGYgYXMgZ2V0SW5zdGFuY2VCeUlkLHMgYXMgaW5zdGFuY2VzfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpYWxvZy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../../../node_modules/@rynpsc/dialog/dist/module/dialog.js\n");

/***/ }),

/***/ "./src/js/payments/opayo.js":
/*!**********************************!*\
  !*** ./src/js/payments/opayo.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FormieOpayo\": () => (/* binding */ FormieOpayo)\n/* harmony export */ });\n/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/utils */ \"./src/js/utils/utils.js\");\n/* harmony import */ var _payment_provider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./payment-provider */ \"./src/js/payments/payment-provider.js\");\n/* harmony import */ var _rynpsc_dialog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @rynpsc/dialog */ \"../../../../node_modules/@rynpsc/dialog/dist/module/dialog.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\nvar FormieOpayo = /*#__PURE__*/function (_FormiePaymentProvide) {\n  _inherits(FormieOpayo, _FormiePaymentProvide);\n\n  var _super = _createSuper(FormieOpayo);\n\n  function FormieOpayo() {\n    var _this;\n\n    var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, FormieOpayo);\n\n    _this = _super.call(this, settings);\n    _this.$form = settings.$form;\n    _this.form = _this.$form.form;\n    _this.$field = settings.$field;\n    _this.useSandbox = settings.useSandbox;\n    _this.integrationHandle = settings.handle;\n    _this.currency = settings.currency;\n    _this.amountType = settings.amountType;\n    _this.amountFixed = settings.amountFixed;\n    _this.amountVariable = settings.amountVariable;\n    _this.opayoScriptId = 'FORMIE_OPAYO_SCRIPT'; // We can start listening for the field to become visible to initialize it\n\n    _this.initialized = true;\n    return _this;\n  }\n\n  _createClass(FormieOpayo, [{\n    key: \"onShow\",\n    value: function onShow() {\n      // Initialize the field only when it's visible\n      this.initField();\n    }\n  }, {\n    key: \"onHide\",\n    value: function onHide() {\n      // Field is hidden, so reset everything\n      this.onAfterSubmit(); // Remove unique event listeners\n\n      this.form.removeEventListener((0,_utils_utils__WEBPACK_IMPORTED_MODULE_0__.eventKey)('onFormiePaymentValidate', 'opayo'));\n      this.form.removeEventListener((0,_utils_utils__WEBPACK_IMPORTED_MODULE_0__.eventKey)('onAfterFormieSubmit', 'opayo'));\n      this.form.removeEventListener((0,_utils_utils__WEBPACK_IMPORTED_MODULE_0__.eventKey)('FormiePaymentOpayo3DS', 'opayo'));\n    }\n  }, {\n    key: \"initField\",\n    value: function initField() {\n      // Fetch and attach the script only once - this is in case there are multiple forms on the page.\n      // They all go to a single callback which resolves its loaded state\n      if (!document.getElementById(this.opayoScriptId)) {\n        var $script = document.createElement('script');\n        $script.id = this.opayoScriptId;\n\n        if (this.useSandbox) {\n          $script.src = 'https://pi-test.sagepay.com/api/v1/js/sagepay.js';\n        } else {\n          $script.src = 'https://pi.sagepay.com/api/v1/js/sagepay.js';\n        }\n\n        $script.async = true;\n        $script.defer = true;\n        document.body.appendChild($script);\n      } // Attach custom event listeners on the form\n\n\n      this.form.addEventListener(this.$form, (0,_utils_utils__WEBPACK_IMPORTED_MODULE_0__.eventKey)('onFormiePaymentValidate', 'opayo'), this.onValidate.bind(this));\n      this.form.addEventListener(this.$form, (0,_utils_utils__WEBPACK_IMPORTED_MODULE_0__.eventKey)('onAfterFormieSubmit', 'opayo'), this.onAfterSubmit.bind(this));\n      this.form.addEventListener(this.$form, (0,_utils_utils__WEBPACK_IMPORTED_MODULE_0__.eventKey)('FormiePaymentOpayo3DS', 'opayo'), this.onValidate3DS.bind(this)); // Listen to events sent from the iframe to complete 3DS challenge\n\n      window.addEventListener('message', this.onMessage.bind(this), false);\n    }\n  }, {\n    key: \"onValidate\",\n    value: function onValidate(e) {\n      var _this2 = this;\n\n      // Don't validate if we're not submitting (going back, saving)\n      // Check if the form has an invalid flag set, don't bother going further\n      if (this.form.submitAction !== 'submit' || e.detail.invalid) {\n        return;\n      }\n\n      e.preventDefault(); // Save for later to trigger real submit\n\n      this.submitHandler = e.detail.submitHandler;\n      this.removeError();\n\n      try {\n        // Fetch/generate the merchant ID first via an Ajax request\n        var action = this.$form.getAttribute('action');\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', action ? action : window.location.href, true);\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        xhr.setRequestHeader('Accept', 'application/json');\n        xhr.setRequestHeader('Cache-Control', 'no-cache');\n\n        xhr.ontimeout = function () {\n          self.addError(t('The request timed out.'));\n        };\n\n        xhr.onerror = function (e) {\n          self.addError(t('The request encountered a network error. Please try again.'));\n        };\n\n        xhr.onload = function () {\n          if (xhr.status >= 200 && xhr.status < 300) {\n            try {\n              var response = JSON.parse(xhr.responseText); // Get the data from the client\n\n              var cardDetails = {\n                cardholderName: _this2.$field.querySelector('[data-opayo-card=\"cardholder-name\"]').value,\n                cardNumber: _this2.$field.querySelector('[data-opayo-card=\"card-number\"]').value,\n                expiryDate: _this2.$field.querySelector('[data-opayo-card=\"expiry-date\"]').value,\n                securityCode: _this2.$field.querySelector('[data-opayo-card=\"security-code\"]').value\n              }; // With the `merchantSessionKey`, now tokenize the credit card form and trigger submit\n\n              sagepayOwnForm({\n                merchantSessionKey: response.merchantSessionKey\n              }).tokeniseCardDetails({\n                cardDetails: cardDetails,\n                onTokenised: function onTokenised(result) {\n                  if (result.success) {\n                    // Append an input so it's not namespaced with Twig\n                    _this2.updateInputs('opayoTokenId', result.cardIdentifier);\n\n                    _this2.updateInputs('opayoSessionKey', response.merchantSessionKey);\n\n                    _this2.submitHandler.submitForm();\n                  } else {\n                    console.error(result);\n\n                    _this2.addError(result.errors[0].message);\n                  }\n                }\n              });\n            } catch (e) {\n              _this2.addError(t('Unable to parse response `{e}`.', {\n                e: e\n              }));\n            }\n          } else {\n            _this2.addError(\"\".concat(xhr.status, \": \").concat(xhr.statusText));\n          }\n        };\n\n        var data = new FormData();\n        data.append('action', 'formie/payment-webhooks/process-callback');\n        data.append('merchantSessionKey', true);\n        data.append('handle', this.integrationHandle);\n        xhr.send(data);\n      } catch (ex) {\n        console.error(ex);\n        this.addError(ex);\n      }\n    }\n  }, {\n    key: \"addLoading\",\n    value: function addLoading() {\n      if (this.form.formTheme) {\n        this.form.formTheme.addLoading();\n      }\n    }\n  }, {\n    key: \"removeLoading\",\n    value: function removeLoading() {\n      if (this.form.formTheme) {\n        this.form.formTheme.removeLoading();\n      }\n    }\n  }, {\n    key: \"onMessage\",\n    value: function onMessage(e) {\n      // Check this is the correct message\n      if (e.data.message !== 'FormiePaymentOpayo3DSResponse') {\n        return;\n      }\n\n      if (this.dialog) {\n        this.dialog.close();\n      }\n\n      this.removeError();\n\n      if (e.data.value.error) {\n        this.removeLoading();\n        return this.addError(e.data.value.error.message);\n      } // Add a flag for server-side to check and finalise\n\n\n      this.updateInputs('opayo3DSComplete', e.data.value.transactionId);\n      this.submitHandler.submitForm();\n    }\n  }, {\n    key: \"onValidate3DS\",\n    value: function onValidate3DS(e) {\n      try {\n        var data = e.detail.data; // Keep the spinner going for 3DS\n\n        this.addLoading();\n        var dialogId = \"fui-opayo-dialog-\".concat((Math.random() + 1).toString(36).substring(7));\n        var $dialog = document.createElement('div');\n        $dialog.setAttribute('class', 'fui-modal');\n        $dialog.setAttribute('id', dialogId);\n        var $dialogBackdrop = document.createElement('div');\n        $dialogBackdrop.setAttribute('class', 'fui-modal-backdrop');\n        $dialogBackdrop.setAttribute('data-dialog-close', 'dialog');\n        $dialog.appendChild($dialogBackdrop);\n        var $dialogContent = document.createElement('div');\n        $dialogContent.setAttribute('class', 'fui-modal-content');\n        $dialog.appendChild($dialogContent);\n        var $dialogLoading = document.createElement('div');\n        $dialogLoading.setAttribute('class', 'fui-loading fui-loading-large');\n        $dialogLoading.setAttribute('style', '--fui-loading-width: 3rem; --fui-loading-height: 3rem; --fui-loading-border-width: 4px; top: 50%; margin-top: -1.5rem;');\n        $dialogContent.appendChild($dialogLoading);\n        var $iframe = document.createElement('iframe');\n        $iframe.setAttribute('width', '100%');\n        $iframe.setAttribute('height', '100%');\n        $iframe.setAttribute('style', 'width: 100%; height: 100%; position: relative; z-index: 1;');\n        var html = \"<form action=\\\"\".concat(data.acsUrl, \"\\\" method=\\\"post\\\">\\n                <input type=\\\"hidden\\\" name=\\\"creq\\\" value=\\\"\").concat(data.creq, \"\\\" />\\n                <input type=\\\"hidden\\\" name=\\\"threeDSSessionData\\\" value=\\\"\").concat(data.threeDSSessionData, \"\\\" />\\n                <input type=\\\"hidden\\\" name=\\\"MD\\\" value=\\\"\").concat(this.merchantSessionKey, \"\\\" />\\n                <input type=\\\"hidden\\\" name=\\\"TermUrl\\\" value=\\\"\").concat(data.redirectUrl, \"\\\" />\\n                <input type=\\\"hidden\\\" name=\\\"ThreeDSNotificationURL\\\" value=\\\"\").concat(data.redirectUrl, \"\\\" />\\n            </form>\\n            <script>document.forms[0].submit();</script>\");\n        $dialogContent.appendChild($iframe);\n        document.body.appendChild($dialog);\n        $iframe.contentWindow.document.open();\n        $iframe.contentWindow.document.write(html);\n        $iframe.contentWindow.document.close();\n        this.dialog = (0,_rynpsc_dialog__WEBPACK_IMPORTED_MODULE_2__.dialog)(dialogId);\n\n        if (this.dialog) {\n          this.dialog.create();\n          this.dialog.open();\n        }\n      } catch (ex) {\n        console.error(ex);\n        self.addError(ex);\n      }\n    }\n  }, {\n    key: \"onAfterSubmit\",\n    value: function onAfterSubmit(e) {\n      // Reset all hidden inputs\n      this.updateInputs('opayoTokenId', '');\n      this.updateInputs('opayoSessionKey', '');\n      this.updateInputs('opayo3DSComplete', '');\n    }\n  }]);\n\n  return FormieOpayo;\n}(_payment_provider__WEBPACK_IMPORTED_MODULE_1__.FormiePaymentProvider);\nwindow.FormieOpayo = FormieOpayo;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS3JDLGtCQUh2QyxvRkFJdUNhLElBQUksQ0FBQ3lCLFdBSjVDLG1HQUtzRHpCLElBQUksQ0FBQ3lCLFdBTDNELHlGQUFWO1FBU0FQLGNBQWMsQ0FBQ3hFLFdBQWYsQ0FBMkIwRSxPQUEzQjtRQUNBbkYsUUFBUSxDQUFDUSxJQUFULENBQWNDLFdBQWQsQ0FBMEJxRSxPQUExQjtRQUVBSyxPQUFPLENBQUNNLGFBQVIsQ0FBc0J6RixRQUF0QixDQUErQjJCLElBQS9CO1FBQ0F3RCxPQUFPLENBQUNNLGFBQVIsQ0FBc0J6RixRQUF0QixDQUErQjBGLEtBQS9CLENBQXFDTixJQUFyQztRQUNBRCxPQUFPLENBQUNNLGFBQVIsQ0FBc0J6RixRQUF0QixDQUErQnVFLEtBQS9CO1FBRUEsS0FBS3pGLE1BQUwsR0FBY0Esc0RBQU0sQ0FBQzJGLFFBQUQsQ0FBcEI7O1FBRUEsSUFBSSxLQUFLM0YsTUFBVCxFQUFpQjtVQUNiLEtBQUtBLE1BQUwsQ0FBWTZHLE1BQVo7VUFFQSxLQUFLN0csTUFBTCxDQUFZNkMsSUFBWjtRQUNIO01BQ0osQ0F0REQsQ0FzREUsT0FBT3dDLEVBQVAsRUFBVztRQUNUVCxPQUFPLENBQUNDLEtBQVIsQ0FBY1EsRUFBZDtRQUVBbkMsSUFBSSxDQUFDQyxRQUFMLENBQWNrQyxFQUFkO01BQ0g7SUFDSjtFQXJQTDtJQUFBO0lBQUEsT0F1UEksdUJBQWNuRCxDQUFkLEVBQWlCO01BQ2I7TUFDQSxLQUFLdUMsWUFBTCxDQUFrQixjQUFsQixFQUFrQyxFQUFsQztNQUNBLEtBQUtBLFlBQUwsQ0FBa0IsaUJBQWxCLEVBQXFDLEVBQXJDO01BQ0EsS0FBS0EsWUFBTCxDQUFrQixrQkFBbEIsRUFBc0MsRUFBdEM7SUFDSDtFQTVQTDs7RUFBQTtBQUFBLEVBQWlDMUUsb0VBQWpDO0FBK1BBaUMsTUFBTSxDQUFDL0IsV0FBUCxHQUFxQkEsV0FBckIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvcGF5bWVudHMvb3BheW8uanM/YmRiNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBldmVudEtleSB9IGZyb20gJy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCB7IEZvcm1pZVBheW1lbnRQcm92aWRlciB9IGZyb20gJy4vcGF5bWVudC1wcm92aWRlcic7XG5pbXBvcnQgeyBkaWFsb2cgfSBmcm9tICdAcnlucHNjL2RpYWxvZyc7XG5cbmV4cG9ydCBjbGFzcyBGb3JtaWVPcGF5byBleHRlbmRzIEZvcm1pZVBheW1lbnRQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MgPSB7fSkge1xuICAgICAgICBzdXBlcihzZXR0aW5ncyk7XG5cbiAgICAgICAgdGhpcy4kZm9ybSA9IHNldHRpbmdzLiRmb3JtO1xuICAgICAgICB0aGlzLmZvcm0gPSB0aGlzLiRmb3JtLmZvcm07XG4gICAgICAgIHRoaXMuJGZpZWxkID0gc2V0dGluZ3MuJGZpZWxkO1xuXG4gICAgICAgIHRoaXMudXNlU2FuZGJveCA9IHNldHRpbmdzLnVzZVNhbmRib3g7XG4gICAgICAgIHRoaXMuaW50ZWdyYXRpb25IYW5kbGUgPSBzZXR0aW5ncy5oYW5kbGU7XG4gICAgICAgIHRoaXMuY3VycmVuY3kgPSBzZXR0aW5ncy5jdXJyZW5jeTtcbiAgICAgICAgdGhpcy5hbW91bnRUeXBlID0gc2V0dGluZ3MuYW1vdW50VHlwZTtcbiAgICAgICAgdGhpcy5hbW91bnRGaXhlZCA9IHNldHRpbmdzLmFtb3VudEZpeGVkO1xuICAgICAgICB0aGlzLmFtb3VudFZhcmlhYmxlID0gc2V0dGluZ3MuYW1vdW50VmFyaWFibGU7XG4gICAgICAgIHRoaXMub3BheW9TY3JpcHRJZCA9ICdGT1JNSUVfT1BBWU9fU0NSSVBUJztcblxuICAgICAgICAvLyBXZSBjYW4gc3RhcnQgbGlzdGVuaW5nIGZvciB0aGUgZmllbGQgdG8gYmVjb21lIHZpc2libGUgdG8gaW5pdGlhbGl6ZSBpdFxuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBvblNob3coKSB7XG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIGZpZWxkIG9ubHkgd2hlbiBpdCdzIHZpc2libGVcbiAgICAgICAgdGhpcy5pbml0RmllbGQoKTtcbiAgICB9XG5cbiAgICBvbkhpZGUoKSB7XG4gICAgICAgIC8vIEZpZWxkIGlzIGhpZGRlbiwgc28gcmVzZXQgZXZlcnl0aGluZ1xuICAgICAgICB0aGlzLm9uQWZ0ZXJTdWJtaXQoKTtcblxuICAgICAgICAvLyBSZW1vdmUgdW5pcXVlIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICB0aGlzLmZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudEtleSgnb25Gb3JtaWVQYXltZW50VmFsaWRhdGUnLCAnb3BheW8nKSk7XG4gICAgICAgIHRoaXMuZm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50S2V5KCdvbkFmdGVyRm9ybWllU3VibWl0JywgJ29wYXlvJykpO1xuICAgICAgICB0aGlzLmZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudEtleSgnRm9ybWllUGF5bWVudE9wYXlvM0RTJywgJ29wYXlvJykpO1xuICAgIH1cblxuICAgIGluaXRGaWVsZCgpIHtcbiAgICAgICAgLy8gRmV0Y2ggYW5kIGF0dGFjaCB0aGUgc2NyaXB0IG9ubHkgb25jZSAtIHRoaXMgaXMgaW4gY2FzZSB0aGVyZSBhcmUgbXVsdGlwbGUgZm9ybXMgb24gdGhlIHBhZ2UuXG4gICAgICAgIC8vIFRoZXkgYWxsIGdvIHRvIGEgc2luZ2xlIGNhbGxiYWNrIHdoaWNoIHJlc29sdmVzIGl0cyBsb2FkZWQgc3RhdGVcbiAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLm9wYXlvU2NyaXB0SWQpKSB7XG4gICAgICAgICAgICBjb25zdCAkc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgICAgICAkc2NyaXB0LmlkID0gdGhpcy5vcGF5b1NjcmlwdElkO1xuXG4gICAgICAgICAgICBpZiAodGhpcy51c2VTYW5kYm94KSB7XG4gICAgICAgICAgICAgICAgJHNjcmlwdC5zcmMgPSAnaHR0cHM6Ly9waS10ZXN0LnNhZ2VwYXkuY29tL2FwaS92MS9qcy9zYWdlcGF5LmpzJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjcmlwdC5zcmMgPSAnaHR0cHM6Ly9waS5zYWdlcGF5LmNvbS9hcGkvdjEvanMvc2FnZXBheS5qcyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgJHNjcmlwdC5kZWZlciA9IHRydWU7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoJHNjcmlwdCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBdHRhY2ggY3VzdG9tIGV2ZW50IGxpc3RlbmVycyBvbiB0aGUgZm9ybVxuICAgICAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcih0aGlzLiRmb3JtLCBldmVudEtleSgnb25Gb3JtaWVQYXltZW50VmFsaWRhdGUnLCAnb3BheW8nKSwgdGhpcy5vblZhbGlkYXRlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcih0aGlzLiRmb3JtLCBldmVudEtleSgnb25BZnRlckZvcm1pZVN1Ym1pdCcsICdvcGF5bycpLCB0aGlzLm9uQWZ0ZXJTdWJtaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKHRoaXMuJGZvcm0sIGV2ZW50S2V5KCdGb3JtaWVQYXltZW50T3BheW8zRFMnLCAnb3BheW8nKSwgdGhpcy5vblZhbGlkYXRlM0RTLmJpbmQodGhpcykpO1xuXG4gICAgICAgIC8vIExpc3RlbiB0byBldmVudHMgc2VudCBmcm9tIHRoZSBpZnJhbWUgdG8gY29tcGxldGUgM0RTIGNoYWxsZW5nZVxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMub25NZXNzYWdlLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICB9XG5cbiAgICBvblZhbGlkYXRlKGUpIHtcbiAgICAgICAgLy8gRG9uJ3QgdmFsaWRhdGUgaWYgd2UncmUgbm90IHN1Ym1pdHRpbmcgKGdvaW5nIGJhY2ssIHNhdmluZylcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZvcm0gaGFzIGFuIGludmFsaWQgZmxhZyBzZXQsIGRvbid0IGJvdGhlciBnb2luZyBmdXJ0aGVyXG4gICAgICAgIGlmICh0aGlzLmZvcm0uc3VibWl0QWN0aW9uICE9PSAnc3VibWl0JyB8fCBlLmRldGFpbC5pbnZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgLy8gU2F2ZSBmb3IgbGF0ZXIgdG8gdHJpZ2dlciByZWFsIHN1Ym1pdFxuICAgICAgICB0aGlzLnN1Ym1pdEhhbmRsZXIgPSBlLmRldGFpbC5zdWJtaXRIYW5kbGVyO1xuXG4gICAgICAgIHRoaXMucmVtb3ZlRXJyb3IoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRmV0Y2gvZ2VuZXJhdGUgdGhlIG1lcmNoYW50IElEIGZpcnN0IHZpYSBhbiBBamF4IHJlcXVlc3RcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuJGZvcm0uZ2V0QXR0cmlidXRlKCdhY3Rpb24nKTtcblxuICAgICAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIGFjdGlvbiA/IGFjdGlvbiA6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLCB0cnVlKTtcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0Jyk7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ25vLWNhY2hlJyk7XG5cbiAgICAgICAgICAgIHhoci5vbnRpbWVvdXQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VsZi5hZGRFcnJvcih0KCdUaGUgcmVxdWVzdCB0aW1lZCBvdXQuJykpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHNlbGYuYWRkRXJyb3IodCgnVGhlIHJlcXVlc3QgZW5jb3VudGVyZWQgYSBuZXR3b3JrIGVycm9yLiBQbGVhc2UgdHJ5IGFnYWluLicpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBkYXRhIGZyb20gdGhlIGNsaWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FyZERldGFpbHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZGhvbGRlck5hbWU6IHRoaXMuJGZpZWxkLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW9wYXlvLWNhcmQ9XCJjYXJkaG9sZGVyLW5hbWVcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkTnVtYmVyOiB0aGlzLiRmaWVsZC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1vcGF5by1jYXJkPVwiY2FyZC1udW1iZXJcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlEYXRlOiB0aGlzLiRmaWVsZC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1vcGF5by1jYXJkPVwiZXhwaXJ5LWRhdGVcIl0nKS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN1cml0eUNvZGU6IHRoaXMuJGZpZWxkLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW9wYXlvLWNhcmQ9XCJzZWN1cml0eS1jb2RlXCJdJykudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXaXRoIHRoZSBgbWVyY2hhbnRTZXNzaW9uS2V5YCwgbm93IHRva2VuaXplIHRoZSBjcmVkaXQgY2FyZCBmb3JtIGFuZCB0cmlnZ2VyIHN1Ym1pdFxuICAgICAgICAgICAgICAgICAgICAgICAgc2FnZXBheU93bkZvcm0oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmNoYW50U2Vzc2lvbktleTogcmVzcG9uc2UubWVyY2hhbnRTZXNzaW9uS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkudG9rZW5pc2VDYXJkRGV0YWlscyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZERldGFpbHMsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblRva2VuaXNlZDogKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBhbiBpbnB1dCBzbyBpdCdzIG5vdCBuYW1lc3BhY2VkIHdpdGggVHdpZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dHMoJ29wYXlvVG9rZW5JZCcsIHJlc3VsdC5jYXJkSWRlbnRpZmllcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUlucHV0cygnb3BheW9TZXNzaW9uS2V5JywgcmVzcG9uc2UubWVyY2hhbnRTZXNzaW9uS2V5KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJtaXRIYW5kbGVyLnN1Ym1pdEZvcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVzdWx0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFcnJvcihyZXN1bHQuZXJyb3JzWzBdLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEVycm9yKHQoJ1VuYWJsZSB0byBwYXJzZSByZXNwb25zZSBge2V9YC4nLCB7IGUgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFcnJvcihgJHt4aHIuc3RhdHVzfTogJHt4aHIuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICBkYXRhLmFwcGVuZCgnYWN0aW9uJywgJ2Zvcm1pZS9wYXltZW50LXdlYmhvb2tzL3Byb2Nlc3MtY2FsbGJhY2snKTtcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdtZXJjaGFudFNlc3Npb25LZXknLCB0cnVlKTtcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdoYW5kbGUnLCB0aGlzLmludGVncmF0aW9uSGFuZGxlKTtcblxuICAgICAgICAgICAgeGhyLnNlbmQoZGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGV4KTtcblxuICAgICAgICAgICAgdGhpcy5hZGRFcnJvcihleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGRMb2FkaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5mb3JtLmZvcm1UaGVtZSkge1xuICAgICAgICAgICAgdGhpcy5mb3JtLmZvcm1UaGVtZS5hZGRMb2FkaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVMb2FkaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5mb3JtLmZvcm1UaGVtZSkge1xuICAgICAgICAgICAgdGhpcy5mb3JtLmZvcm1UaGVtZS5yZW1vdmVMb2FkaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbk1lc3NhZ2UoZSkge1xuICAgICAgICAvLyBDaGVjayB0aGlzIGlzIHRoZSBjb3JyZWN0IG1lc3NhZ2VcbiAgICAgICAgaWYgKGUuZGF0YS5tZXNzYWdlICE9PSAnRm9ybWllUGF5bWVudE9wYXlvM0RTUmVzcG9uc2UnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kaWFsb2cpIHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbW92ZUVycm9yKCk7XG5cbiAgICAgICAgaWYgKGUuZGF0YS52YWx1ZS5lcnJvcikge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVMb2FkaW5nKCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZEVycm9yKGUuZGF0YS52YWx1ZS5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBhIGZsYWcgZm9yIHNlcnZlci1zaWRlIHRvIGNoZWNrIGFuZCBmaW5hbGlzZVxuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0cygnb3BheW8zRFNDb21wbGV0ZScsIGUuZGF0YS52YWx1ZS50cmFuc2FjdGlvbklkKTtcblxuICAgICAgICB0aGlzLnN1Ym1pdEhhbmRsZXIuc3VibWl0Rm9ybSgpO1xuICAgIH1cblxuICAgIG9uVmFsaWRhdGUzRFMoZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBlLmRldGFpbDtcblxuICAgICAgICAgICAgLy8gS2VlcCB0aGUgc3Bpbm5lciBnb2luZyBmb3IgM0RTXG4gICAgICAgICAgICB0aGlzLmFkZExvYWRpbmcoKTtcblxuICAgICAgICAgICAgY29uc3QgZGlhbG9nSWQgPSBgZnVpLW9wYXlvLWRpYWxvZy0keyhNYXRoLnJhbmRvbSgpICsgMSkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KX1gO1xuXG4gICAgICAgICAgICBjb25zdCAkZGlhbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAkZGlhbG9nLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZnVpLW1vZGFsJyk7XG4gICAgICAgICAgICAkZGlhbG9nLnNldEF0dHJpYnV0ZSgnaWQnLCBkaWFsb2dJZCk7XG5cbiAgICAgICAgICAgIGNvbnN0ICRkaWFsb2dCYWNrZHJvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgJGRpYWxvZ0JhY2tkcm9wLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZnVpLW1vZGFsLWJhY2tkcm9wJyk7XG4gICAgICAgICAgICAkZGlhbG9nQmFja2Ryb3Auc2V0QXR0cmlidXRlKCdkYXRhLWRpYWxvZy1jbG9zZScsICdkaWFsb2cnKTtcbiAgICAgICAgICAgICRkaWFsb2cuYXBwZW5kQ2hpbGQoJGRpYWxvZ0JhY2tkcm9wKTtcblxuICAgICAgICAgICAgY29uc3QgJGRpYWxvZ0NvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICRkaWFsb2dDb250ZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZnVpLW1vZGFsLWNvbnRlbnQnKTtcbiAgICAgICAgICAgICRkaWFsb2cuYXBwZW5kQ2hpbGQoJGRpYWxvZ0NvbnRlbnQpO1xuXG4gICAgICAgICAgICBjb25zdCAkZGlhbG9nTG9hZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgJGRpYWxvZ0xvYWRpbmcuc2V0QXR0cmlidXRlKCdjbGFzcycsICdmdWktbG9hZGluZyBmdWktbG9hZGluZy1sYXJnZScpO1xuICAgICAgICAgICAgJGRpYWxvZ0xvYWRpbmcuc2V0QXR0cmlidXRlKCdzdHlsZScsICctLWZ1aS1sb2FkaW5nLXdpZHRoOiAzcmVtOyAtLWZ1aS1sb2FkaW5nLWhlaWdodDogM3JlbTsgLS1mdWktbG9hZGluZy1ib3JkZXItd2lkdGg6IDRweDsgdG9wOiA1MCU7IG1hcmdpbi10b3A6IC0xLjVyZW07Jyk7XG4gICAgICAgICAgICAkZGlhbG9nQ29udGVudC5hcHBlbmRDaGlsZCgkZGlhbG9nTG9hZGluZyk7XG5cbiAgICAgICAgICAgIGNvbnN0ICRpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICAgICAgICAgICRpZnJhbWUuc2V0QXR0cmlidXRlKCd3aWR0aCcsICcxMDAlJyk7XG4gICAgICAgICAgICAkaWZyYW1lLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJzEwMCUnKTtcbiAgICAgICAgICAgICRpZnJhbWUuc2V0QXR0cmlidXRlKCdzdHlsZScsICd3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogcmVsYXRpdmU7IHotaW5kZXg6IDE7Jyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBgPGZvcm0gYWN0aW9uPVwiJHtkYXRhLmFjc1VybH1cIiBtZXRob2Q9XCJwb3N0XCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiY3JlcVwiIHZhbHVlPVwiJHtkYXRhLmNyZXF9XCIgLz5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJ0aHJlZURTU2Vzc2lvbkRhdGFcIiB2YWx1ZT1cIiR7ZGF0YS50aHJlZURTU2Vzc2lvbkRhdGF9XCIgLz5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJNRFwiIHZhbHVlPVwiJHt0aGlzLm1lcmNoYW50U2Vzc2lvbktleX1cIiAvPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cIlRlcm1VcmxcIiB2YWx1ZT1cIiR7ZGF0YS5yZWRpcmVjdFVybH1cIiAvPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cIlRocmVlRFNOb3RpZmljYXRpb25VUkxcIiB2YWx1ZT1cIiR7ZGF0YS5yZWRpcmVjdFVybH1cIiAvPlxuICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgPHNjcmlwdD5kb2N1bWVudC5mb3Jtc1swXS5zdWJtaXQoKTs8L3NjcmlwdD5gO1xuXG4gICAgICAgICAgICAkZGlhbG9nQ29udGVudC5hcHBlbmRDaGlsZCgkaWZyYW1lKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoJGRpYWxvZyk7XG5cbiAgICAgICAgICAgICRpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC5vcGVuKCk7XG4gICAgICAgICAgICAkaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQud3JpdGUoaHRtbCk7XG4gICAgICAgICAgICAkaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTtcblxuICAgICAgICAgICAgdGhpcy5kaWFsb2cgPSBkaWFsb2coZGlhbG9nSWQpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5kaWFsb2cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5jcmVhdGUoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXgpO1xuXG4gICAgICAgICAgICBzZWxmLmFkZEVycm9yKGV4KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQWZ0ZXJTdWJtaXQoZSkge1xuICAgICAgICAvLyBSZXNldCBhbGwgaGlkZGVuIGlucHV0c1xuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0cygnb3BheW9Ub2tlbklkJywgJycpO1xuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0cygnb3BheW9TZXNzaW9uS2V5JywgJycpO1xuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0cygnb3BheW8zRFNDb21wbGV0ZScsICcnKTtcbiAgICB9XG59XG5cbndpbmRvdy5Gb3JtaWVPcGF5byA9IEZvcm1pZU9wYXlvO1xuIl0sIm5hbWVzIjpbImV2ZW50S2V5IiwiRm9ybWllUGF5bWVudFByb3ZpZGVyIiwiZGlhbG9nIiwiRm9ybWllT3BheW8iLCJzZXR0aW5ncyIsIiRmb3JtIiwiZm9ybSIsIiRmaWVsZCIsInVzZVNhbmRib3giLCJpbnRlZ3JhdGlvbkhhbmRsZSIsImhhbmRsZSIsImN1cnJlbmN5IiwiYW1vdW50VHlwZSIsImFtb3VudEZpeGVkIiwiYW1vdW50VmFyaWFibGUiLCJvcGF5b1NjcmlwdElkIiwiaW5pdGlhbGl6ZWQiLCJpbml0RmllbGQiLCJvbkFmdGVyU3VibWl0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCIkc2NyaXB0IiwiY3JlYXRlRWxlbWVudCIsImlkIiwic3JjIiwiYXN5bmMiLCJkZWZlciIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblZhbGlkYXRlIiwiYmluZCIsIm9uVmFsaWRhdGUzRFMiLCJ3aW5kb3ciLCJvbk1lc3NhZ2UiLCJlIiwic3VibWl0QWN0aW9uIiwiZGV0YWlsIiwiaW52YWxpZCIsInByZXZlbnREZWZhdWx0Iiwic3VibWl0SGFuZGxlciIsInJlbW92ZUVycm9yIiwiYWN0aW9uIiwiZ2V0QXR0cmlidXRlIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwibG9jYXRpb24iLCJocmVmIiwic2V0UmVxdWVzdEhlYWRlciIsIm9udGltZW91dCIsInNlbGYiLCJhZGRFcnJvciIsInQiLCJvbmVycm9yIiwib25sb2FkIiwic3RhdHVzIiwicmVzcG9uc2UiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJjYXJkRGV0YWlscyIsImNhcmRob2xkZXJOYW1lIiwicXVlcnlTZWxlY3RvciIsInZhbHVlIiwiY2FyZE51bWJlciIsImV4cGlyeURhdGUiLCJzZWN1cml0eUNvZGUiLCJzYWdlcGF5T3duRm9ybSIsIm1lcmNoYW50U2Vzc2lvbktleSIsInRva2VuaXNlQ2FyZERldGFpbHMiLCJvblRva2VuaXNlZCIsInJlc3VsdCIsInN1Y2Nlc3MiLCJ1cGRhdGVJbnB1dHMiLCJjYXJkSWRlbnRpZmllciIsInN1Ym1pdEZvcm0iLCJjb25zb2xlIiwiZXJyb3IiLCJlcnJvcnMiLCJtZXNzYWdlIiwic3RhdHVzVGV4dCIsImRhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInNlbmQiLCJleCIsImZvcm1UaGVtZSIsImFkZExvYWRpbmciLCJyZW1vdmVMb2FkaW5nIiwiY2xvc2UiLCJ0cmFuc2FjdGlvbklkIiwiZGlhbG9nSWQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCIkZGlhbG9nIiwic2V0QXR0cmlidXRlIiwiJGRpYWxvZ0JhY2tkcm9wIiwiJGRpYWxvZ0NvbnRlbnQiLCIkZGlhbG9nTG9hZGluZyIsIiRpZnJhbWUiLCJodG1sIiwiYWNzVXJsIiwiY3JlcSIsInRocmVlRFNTZXNzaW9uRGF0YSIsInJlZGlyZWN0VXJsIiwiY29udGVudFdpbmRvdyIsIndyaXRlIiwiY3JlYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/payments/opayo.js\n");

/***/ }),

/***/ "./src/js/payments/payment-provider.js":
/*!*********************************************!*\
  !*** ./src/js/payments/payment-provider.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FormiePaymentProvider\": () => (/* binding */ FormiePaymentProvider)\n/* harmony export */ });\n/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/utils */ \"./src/js/utils/utils.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\nvar FormiePaymentProvider = /*#__PURE__*/function () {\n  function FormiePaymentProvider() {\n    var _this = this;\n\n    var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, FormiePaymentProvider);\n\n    this.initialized = false;\n    this.$form = settings.$form;\n    this.form = this.$form.form;\n    this.$field = settings.$field;\n    this.successClass = this.form.getClasses('success');\n    this.successMessageClass = this.form.getClasses('successMessage');\n    this.errorClass = this.form.getClasses('error');\n    this.errorMessageClass = this.form.getClasses('errorMessage');\n    this.isVisible = false; // Only initialize the field if it's visible. Use `IntersectionObserver` to check when visible\n    // and also when hidden (navigating to other pages) to destroy it.\n\n    var observer = new IntersectionObserver(function (entries) {\n      if (entries[0].intersectionRatio == 0) {\n        _this.isVisible = false; // Only call the events if ready\n\n        if (_this.initialized) {\n          _this.onHide();\n        }\n      } else {\n        _this.isVisible = true; // Only call the events if ready\n\n        if (_this.initialized) {\n          _this.onShow();\n        }\n      }\n    }, {\n      root: this.$form\n    }); // Watch for when the input is visible/hidden, in the context of the form. But wait a little to start watching\n    // to prevent double binding when still loading the form, or hidden behind conditions.\n\n    setTimeout(function () {\n      observer.observe(_this.$field);\n    }, 500);\n  }\n\n  _createClass(FormiePaymentProvider, [{\n    key: \"removeSuccess\",\n    value: function removeSuccess() {\n      this.$field.classList.remove(this.successClass);\n      var $success = this.$field.querySelector(\".\".concat(this.successMessageClass));\n\n      if ($success) {\n        $success.remove();\n      }\n    }\n  }, {\n    key: \"addSuccess\",\n    value: function addSuccess(message) {\n      this.$field.classList.add(this.successClass);\n      var $fieldContainer = this.$field.querySelector('[data-field-type] > div');\n\n      if (!$fieldContainer) {\n        return console.error('Unable to find `[data-field-type] > div` to add success message.');\n      }\n\n      var $success = document.createElement('div');\n      $success.className = this.successMessageClass;\n      $success.textContent = message;\n      $fieldContainer.appendChild($success);\n    }\n  }, {\n    key: \"removeError\",\n    value: function removeError() {\n      this.$field.classList.remove(this.errorClass);\n      var $error = this.$field.querySelector(\".\".concat(this.errorMessageClass));\n\n      if ($error) {\n        $error.remove();\n      }\n    }\n  }, {\n    key: \"addError\",\n    value: function addError(message) {\n      this.$field.classList.add(this.errorClass);\n      var $fieldContainer = this.$field.querySelector('[data-field-type] > div');\n\n      if (!$fieldContainer) {\n        return console.error('Unable to find `[data-field-type] > div` to add error message.');\n      }\n\n      var $error = document.createElement('div');\n      $error.className = this.errorMessageClass;\n      $error.textContent = message;\n      $fieldContainer.appendChild($error);\n\n      if (this.submitHandler) {\n        this.submitHandler.formSubmitError();\n      }\n    }\n  }, {\n    key: \"updateInputs\",\n    value: function updateInputs(name, value) {\n      var $input = this.$field.querySelector(\"[name*=\\\"\".concat(name, \"\\\"]\"));\n\n      if ($input) {\n        $input.value = value;\n      }\n    }\n  }, {\n    key: \"getBillingData\",\n    value: function getBillingData() {\n      if (!this.billingDetails) {\n        return {};\n      }\n\n      var billing = {};\n\n      if (this.billingDetails.billingName) {\n        var billingName = this.getFieldValue(this.billingDetails.billingName);\n\n        if (billingName) {\n          billing.name = billingName;\n        }\n      }\n\n      if (this.billingDetails.billingEmail) {\n        var billingEmail = this.getFieldValue(this.billingDetails.billingEmail);\n\n        if (billingEmail) {\n          billing.email = billingEmail;\n        }\n      }\n\n      if (this.billingDetails.billingAddress) {\n        billing.address = {};\n        var address1 = this.getFieldValue(\"\".concat(this.billingDetails.billingAddress, \"[address1]\"));\n        var address2 = this.getFieldValue(\"\".concat(this.billingDetails.billingAddress, \"[address2]\"));\n        var address3 = this.getFieldValue(\"\".concat(this.billingDetails.billingAddress, \"[address3]\"));\n        var city = this.getFieldValue(\"\".concat(this.billingDetails.billingAddress, \"[city]\"));\n        var zip = this.getFieldValue(\"\".concat(this.billingDetails.billingAddress, \"[zip]\"));\n        var state = this.getFieldValue(\"\".concat(this.billingDetails.billingAddress, \"[state]\"));\n        var country = this.getFieldValue(\"\".concat(this.billingDetails.billingAddress, \"[country]\"));\n        /* eslint-disable camelcase */\n\n        if (address1) {\n          billing.address.line1 = address1;\n        }\n\n        if (address2) {\n          billing.address.line2 = address2;\n        }\n\n        if (address3) {\n          billing.address.line3 = address3;\n        }\n\n        if (city) {\n          billing.address.city = city;\n        }\n\n        if (zip) {\n          billing.address.postal_code = zip;\n        }\n\n        if (state) {\n          billing.address.state = state;\n        }\n\n        if (country) {\n          billing.address.country = country;\n        }\n        /* eslint-enable camelcase */\n\n      } // Emit an \"modifyBillingDetails\" event. This can directly modify the `billing` param\n\n\n      var modifyBillingDetailsEvent = new CustomEvent('modifyBillingDetails', {\n        bubbles: true,\n        detail: {\n          provider: this,\n          billing: billing\n        }\n      }); // eslint-disable-next-line camelcase\n\n      return {\n        billing_details: billing\n      };\n    }\n  }, {\n    key: \"getFieldValue\",\n    value: function getFieldValue(handle) {\n      var value = '';\n      handle = this.getFieldName(handle); // We'll always get back multiple inputs to normalise checkbox/radios\n\n      var $fields = this.getFormField(handle);\n\n      if ($fields) {\n        $fields.forEach(function ($field) {\n          if ($field.type === 'checkbox' || $field.type === 'radio') {\n            if ($field.checked) {\n              return value = $field.value;\n            }\n          } else {\n            return value = $field.value;\n          }\n        });\n      }\n\n      return value;\n    }\n  }, {\n    key: \"getFormField\",\n    value: function getFormField(handle) {\n      // Get the field(s) we're targeting to watch for changes. Note we need to handle multiple fields (checkboxes)\n      var $fields = this.$form.querySelectorAll(\"[name=\\\"\".concat(handle, \"\\\"]\")); // Check if we're dealing with multiple fields, like checkboxes. This overrides the above\n\n      var $multiFields = this.$form.querySelectorAll(\"[name=\\\"\".concat(handle, \"[]\\\"]\"));\n\n      if ($multiFields.length) {\n        $fields = $multiFields;\n      }\n\n      return $fields;\n    }\n  }, {\n    key: \"getFieldName\",\n    value: function getFieldName(handle) {\n      // Normalise the handle first\n      handle = handle.replace('{', '').replace('}', '').replace(']', '').split('[').join('][');\n      return \"fields[\".concat(handle, \"]\");\n    }\n  }, {\n    key: \"onShow\",\n    value: function onShow() {}\n  }, {\n    key: \"onHide\",\n    value: function onHide() {}\n  }]);\n\n  return FormiePaymentProvider;\n}();\nwindow.FormiePaymentProvider = FormiePaymentProvider;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFnRSxHQUFoRSxFQUFxRUMsSUFBckUsQ0FBMEUsSUFBMUUsQ0FBVDtNQUVBLHdCQUFpQlosTUFBakI7SUFDSDtFQS9OTDtJQUFBO0lBQUEsT0FpT0ksa0JBQVMsQ0FFUjtFQW5PTDtJQUFBO0lBQUEsT0FxT0ksa0JBQVMsQ0FFUjtFQXZPTDs7RUFBQTtBQUFBO0FBME9BYSxNQUFNLENBQUMvRSxxQkFBUCxHQUErQkEscUJBQS9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3BheW1lbnRzL3BheW1lbnQtcHJvdmlkZXIuanM/YjVmMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBldmVudEtleSB9IGZyb20gJy4uL3V0aWxzL3V0aWxzJztcblxuZXhwb3J0IGNsYXNzIEZvcm1pZVBheW1lbnRQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MgPSB7fSkge1xuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJGZvcm0gPSBzZXR0aW5ncy4kZm9ybTtcbiAgICAgICAgdGhpcy5mb3JtID0gdGhpcy4kZm9ybS5mb3JtO1xuICAgICAgICB0aGlzLiRmaWVsZCA9IHNldHRpbmdzLiRmaWVsZDtcbiAgICAgICAgdGhpcy5zdWNjZXNzQ2xhc3MgPSB0aGlzLmZvcm0uZ2V0Q2xhc3Nlcygnc3VjY2VzcycpO1xuICAgICAgICB0aGlzLnN1Y2Nlc3NNZXNzYWdlQ2xhc3MgPSB0aGlzLmZvcm0uZ2V0Q2xhc3Nlcygnc3VjY2Vzc01lc3NhZ2UnKTtcbiAgICAgICAgdGhpcy5lcnJvckNsYXNzID0gdGhpcy5mb3JtLmdldENsYXNzZXMoJ2Vycm9yJyk7XG4gICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlQ2xhc3MgPSB0aGlzLmZvcm0uZ2V0Q2xhc3NlcygnZXJyb3JNZXNzYWdlJyk7XG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG5cbiAgICAgICAgLy8gT25seSBpbml0aWFsaXplIHRoZSBmaWVsZCBpZiBpdCdzIHZpc2libGUuIFVzZSBgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJgIHRvIGNoZWNrIHdoZW4gdmlzaWJsZVxuICAgICAgICAvLyBhbmQgYWxzbyB3aGVuIGhpZGRlbiAobmF2aWdhdGluZyB0byBvdGhlciBwYWdlcykgdG8gZGVzdHJveSBpdC5cbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChlbnRyaWVzWzBdLmludGVyc2VjdGlvblJhdGlvID09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gT25seSBjYWxsIHRoZSBldmVudHMgaWYgcmVhZHlcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uSGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgLy8gT25seSBjYWxsIHRoZSBldmVudHMgaWYgcmVhZHlcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgeyByb290OiB0aGlzLiRmb3JtIH0pO1xuXG4gICAgICAgIC8vIFdhdGNoIGZvciB3aGVuIHRoZSBpbnB1dCBpcyB2aXNpYmxlL2hpZGRlbiwgaW4gdGhlIGNvbnRleHQgb2YgdGhlIGZvcm0uIEJ1dCB3YWl0IGEgbGl0dGxlIHRvIHN0YXJ0IHdhdGNoaW5nXG4gICAgICAgIC8vIHRvIHByZXZlbnQgZG91YmxlIGJpbmRpbmcgd2hlbiBzdGlsbCBsb2FkaW5nIHRoZSBmb3JtLCBvciBoaWRkZW4gYmVoaW5kIGNvbmRpdGlvbnMuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLiRmaWVsZCk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlU3VjY2VzcygpIHtcbiAgICAgICAgdGhpcy4kZmllbGQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnN1Y2Nlc3NDbGFzcyk7XG5cbiAgICAgICAgY29uc3QgJHN1Y2Nlc3MgPSB0aGlzLiRmaWVsZC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLnN1Y2Nlc3NNZXNzYWdlQ2xhc3N9YCk7XG5cbiAgICAgICAgaWYgKCRzdWNjZXNzKSB7XG4gICAgICAgICAgICAkc3VjY2Vzcy5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZFN1Y2Nlc3MobWVzc2FnZSkge1xuICAgICAgICB0aGlzLiRmaWVsZC5jbGFzc0xpc3QuYWRkKHRoaXMuc3VjY2Vzc0NsYXNzKTtcblxuICAgICAgICBjb25zdCAkZmllbGRDb250YWluZXIgPSB0aGlzLiRmaWVsZC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1maWVsZC10eXBlXSA+IGRpdicpO1xuXG4gICAgICAgIGlmICghJGZpZWxkQ29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGZpbmQgYFtkYXRhLWZpZWxkLXR5cGVdID4gZGl2YCB0byBhZGQgc3VjY2VzcyBtZXNzYWdlLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgJHN1Y2Nlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgJHN1Y2Nlc3MuY2xhc3NOYW1lID0gdGhpcy5zdWNjZXNzTWVzc2FnZUNsYXNzO1xuICAgICAgICAkc3VjY2Vzcy50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG5cbiAgICAgICAgJGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKCRzdWNjZXNzKTtcbiAgICB9XG5cbiAgICByZW1vdmVFcnJvcigpIHtcbiAgICAgICAgdGhpcy4kZmllbGQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmVycm9yQ2xhc3MpO1xuXG4gICAgICAgIGNvbnN0ICRlcnJvciA9IHRoaXMuJGZpZWxkLnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuZXJyb3JNZXNzYWdlQ2xhc3N9YCk7XG5cbiAgICAgICAgaWYgKCRlcnJvcikge1xuICAgICAgICAgICAgJGVycm9yLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkRXJyb3IobWVzc2FnZSkge1xuICAgICAgICB0aGlzLiRmaWVsZC5jbGFzc0xpc3QuYWRkKHRoaXMuZXJyb3JDbGFzcyk7XG5cbiAgICAgICAgY29uc3QgJGZpZWxkQ29udGFpbmVyID0gdGhpcy4kZmllbGQucXVlcnlTZWxlY3RvcignW2RhdGEtZmllbGQtdHlwZV0gPiBkaXYnKTtcblxuICAgICAgICBpZiAoISRmaWVsZENvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBmaW5kIGBbZGF0YS1maWVsZC10eXBlXSA+IGRpdmAgdG8gYWRkIGVycm9yIG1lc3NhZ2UuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCAkZXJyb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgJGVycm9yLmNsYXNzTmFtZSA9IHRoaXMuZXJyb3JNZXNzYWdlQ2xhc3M7XG4gICAgICAgICRlcnJvci50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG5cbiAgICAgICAgJGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKCRlcnJvcik7XG5cbiAgICAgICAgaWYgKHRoaXMuc3VibWl0SGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5zdWJtaXRIYW5kbGVyLmZvcm1TdWJtaXRFcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlSW5wdXRzKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0ICRpbnB1dCA9IHRoaXMuJGZpZWxkLnF1ZXJ5U2VsZWN0b3IoYFtuYW1lKj1cIiR7bmFtZX1cIl1gKTtcblxuICAgICAgICBpZiAoJGlucHV0KSB7XG4gICAgICAgICAgICAkaW5wdXQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEJpbGxpbmdEYXRhKCkge1xuICAgICAgICBpZiAoIXRoaXMuYmlsbGluZ0RldGFpbHMpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJpbGxpbmcgPSB7fTtcblxuICAgICAgICBpZiAodGhpcy5iaWxsaW5nRGV0YWlscy5iaWxsaW5nTmFtZSkge1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ05hbWUgPSB0aGlzLmdldEZpZWxkVmFsdWUodGhpcy5iaWxsaW5nRGV0YWlscy5iaWxsaW5nTmFtZSk7XG5cbiAgICAgICAgICAgIGlmIChiaWxsaW5nTmFtZSkge1xuICAgICAgICAgICAgICAgIGJpbGxpbmcubmFtZSA9IGJpbGxpbmdOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYmlsbGluZ0RldGFpbHMuYmlsbGluZ0VtYWlsKSB7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nRW1haWwgPSB0aGlzLmdldEZpZWxkVmFsdWUodGhpcy5iaWxsaW5nRGV0YWlscy5iaWxsaW5nRW1haWwpO1xuXG4gICAgICAgICAgICBpZiAoYmlsbGluZ0VtYWlsKSB7XG4gICAgICAgICAgICAgICAgYmlsbGluZy5lbWFpbCA9IGJpbGxpbmdFbWFpbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmJpbGxpbmdEZXRhaWxzLmJpbGxpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgICBiaWxsaW5nLmFkZHJlc3MgPSB7fTtcblxuICAgICAgICAgICAgY29uc3QgYWRkcmVzczEgPSB0aGlzLmdldEZpZWxkVmFsdWUoYCR7dGhpcy5iaWxsaW5nRGV0YWlscy5iaWxsaW5nQWRkcmVzc31bYWRkcmVzczFdYCk7XG4gICAgICAgICAgICBjb25zdCBhZGRyZXNzMiA9IHRoaXMuZ2V0RmllbGRWYWx1ZShgJHt0aGlzLmJpbGxpbmdEZXRhaWxzLmJpbGxpbmdBZGRyZXNzfVthZGRyZXNzMl1gKTtcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MzID0gdGhpcy5nZXRGaWVsZFZhbHVlKGAke3RoaXMuYmlsbGluZ0RldGFpbHMuYmlsbGluZ0FkZHJlc3N9W2FkZHJlc3MzXWApO1xuICAgICAgICAgICAgY29uc3QgY2l0eSA9IHRoaXMuZ2V0RmllbGRWYWx1ZShgJHt0aGlzLmJpbGxpbmdEZXRhaWxzLmJpbGxpbmdBZGRyZXNzfVtjaXR5XWApO1xuICAgICAgICAgICAgY29uc3QgemlwID0gdGhpcy5nZXRGaWVsZFZhbHVlKGAke3RoaXMuYmlsbGluZ0RldGFpbHMuYmlsbGluZ0FkZHJlc3N9W3ppcF1gKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRGaWVsZFZhbHVlKGAke3RoaXMuYmlsbGluZ0RldGFpbHMuYmlsbGluZ0FkZHJlc3N9W3N0YXRlXWApO1xuICAgICAgICAgICAgY29uc3QgY291bnRyeSA9IHRoaXMuZ2V0RmllbGRWYWx1ZShgJHt0aGlzLmJpbGxpbmdEZXRhaWxzLmJpbGxpbmdBZGRyZXNzfVtjb3VudHJ5XWApO1xuXG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbiAgICAgICAgICAgIGlmIChhZGRyZXNzMSkge1xuICAgICAgICAgICAgICAgIGJpbGxpbmcuYWRkcmVzcy5saW5lMSA9IGFkZHJlc3MxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYWRkcmVzczIpIHtcbiAgICAgICAgICAgICAgICBiaWxsaW5nLmFkZHJlc3MubGluZTIgPSBhZGRyZXNzMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFkZHJlc3MzKSB7XG4gICAgICAgICAgICAgICAgYmlsbGluZy5hZGRyZXNzLmxpbmUzID0gYWRkcmVzczM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjaXR5KSB7XG4gICAgICAgICAgICAgICAgYmlsbGluZy5hZGRyZXNzLmNpdHkgPSBjaXR5O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoemlwKSB7XG4gICAgICAgICAgICAgICAgYmlsbGluZy5hZGRyZXNzLnBvc3RhbF9jb2RlID0gemlwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBiaWxsaW5nLmFkZHJlc3Muc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvdW50cnkpIHtcbiAgICAgICAgICAgICAgICBiaWxsaW5nLmFkZHJlc3MuY291bnRyeSA9IGNvdW50cnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIGNhbWVsY2FzZSAqL1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW1pdCBhbiBcIm1vZGlmeUJpbGxpbmdEZXRhaWxzXCIgZXZlbnQuIFRoaXMgY2FuIGRpcmVjdGx5IG1vZGlmeSB0aGUgYGJpbGxpbmdgIHBhcmFtXG4gICAgICAgIGNvbnN0IG1vZGlmeUJpbGxpbmdEZXRhaWxzRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ21vZGlmeUJpbGxpbmdEZXRhaWxzJywge1xuICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiB0aGlzLFxuICAgICAgICAgICAgICAgIGJpbGxpbmcsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2FtZWxjYXNlXG4gICAgICAgIHJldHVybiB7IGJpbGxpbmdfZGV0YWlsczogYmlsbGluZyB9O1xuICAgIH1cblxuICAgIGdldEZpZWxkVmFsdWUoaGFuZGxlKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuXG4gICAgICAgIGhhbmRsZSA9IHRoaXMuZ2V0RmllbGROYW1lKGhhbmRsZSk7XG5cbiAgICAgICAgLy8gV2UnbGwgYWx3YXlzIGdldCBiYWNrIG11bHRpcGxlIGlucHV0cyB0byBub3JtYWxpc2UgY2hlY2tib3gvcmFkaW9zXG4gICAgICAgIGNvbnN0ICRmaWVsZHMgPSB0aGlzLmdldEZvcm1GaWVsZChoYW5kbGUpO1xuXG4gICAgICAgIGlmICgkZmllbGRzKSB7XG4gICAgICAgICAgICAkZmllbGRzLmZvckVhY2goKCRmaWVsZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICgkZmllbGQudHlwZSA9PT0gJ2NoZWNrYm94JyB8fCAkZmllbGQudHlwZSA9PT0gJ3JhZGlvJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJGZpZWxkLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9ICRmaWVsZC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9ICRmaWVsZC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXRGb3JtRmllbGQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEdldCB0aGUgZmllbGQocykgd2UncmUgdGFyZ2V0aW5nIHRvIHdhdGNoIGZvciBjaGFuZ2VzLiBOb3RlIHdlIG5lZWQgdG8gaGFuZGxlIG11bHRpcGxlIGZpZWxkcyAoY2hlY2tib3hlcylcbiAgICAgICAgbGV0ICRmaWVsZHMgPSB0aGlzLiRmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoYFtuYW1lPVwiJHtoYW5kbGV9XCJdYCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgZGVhbGluZyB3aXRoIG11bHRpcGxlIGZpZWxkcywgbGlrZSBjaGVja2JveGVzLiBUaGlzIG92ZXJyaWRlcyB0aGUgYWJvdmVcbiAgICAgICAgY29uc3QgJG11bHRpRmllbGRzID0gdGhpcy4kZm9ybS5xdWVyeVNlbGVjdG9yQWxsKGBbbmFtZT1cIiR7aGFuZGxlfVtdXCJdYCk7XG5cbiAgICAgICAgaWYgKCRtdWx0aUZpZWxkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICRmaWVsZHMgPSAkbXVsdGlGaWVsZHM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJGZpZWxkcztcbiAgICB9XG5cbiAgICBnZXRGaWVsZE5hbWUoaGFuZGxlKSB7XG4gICAgICAgIC8vIE5vcm1hbGlzZSB0aGUgaGFuZGxlIGZpcnN0XG4gICAgICAgIGhhbmRsZSA9IGhhbmRsZS5yZXBsYWNlKCd7JywgJycpLnJlcGxhY2UoJ30nLCAnJykucmVwbGFjZSgnXScsICcnKS5zcGxpdCgnWycpLmpvaW4oJ11bJyk7XG5cbiAgICAgICAgcmV0dXJuIGBmaWVsZHNbJHtoYW5kbGV9XWA7XG4gICAgfVxuXG4gICAgb25TaG93KCkge1xuXG4gICAgfVxuXG4gICAgb25IaWRlKCkge1xuXG4gICAgfVxufVxuXG53aW5kb3cuRm9ybWllUGF5bWVudFByb3ZpZGVyID0gRm9ybWllUGF5bWVudFByb3ZpZGVyO1xuIl0sIm5hbWVzIjpbImV2ZW50S2V5IiwiRm9ybWllUGF5bWVudFByb3ZpZGVyIiwic2V0dGluZ3MiLCJpbml0aWFsaXplZCIsIiRmb3JtIiwiZm9ybSIsIiRmaWVsZCIsInN1Y2Nlc3NDbGFzcyIsImdldENsYXNzZXMiLCJzdWNjZXNzTWVzc2FnZUNsYXNzIiwiZXJyb3JDbGFzcyIsImVycm9yTWVzc2FnZUNsYXNzIiwiaXNWaXNpYmxlIiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJpbnRlcnNlY3Rpb25SYXRpbyIsIm9uSGlkZSIsIm9uU2hvdyIsInJvb3QiLCJzZXRUaW1lb3V0Iiwib2JzZXJ2ZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsIiRzdWNjZXNzIiwicXVlcnlTZWxlY3RvciIsIm1lc3NhZ2UiLCJhZGQiLCIkZmllbGRDb250YWluZXIiLCJjb25zb2xlIiwiZXJyb3IiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwiJGVycm9yIiwic3VibWl0SGFuZGxlciIsImZvcm1TdWJtaXRFcnJvciIsIm5hbWUiLCJ2YWx1ZSIsIiRpbnB1dCIsImJpbGxpbmdEZXRhaWxzIiwiYmlsbGluZyIsImJpbGxpbmdOYW1lIiwiZ2V0RmllbGRWYWx1ZSIsImJpbGxpbmdFbWFpbCIsImVtYWlsIiwiYmlsbGluZ0FkZHJlc3MiLCJhZGRyZXNzIiwiYWRkcmVzczEiLCJhZGRyZXNzMiIsImFkZHJlc3MzIiwiY2l0eSIsInppcCIsInN0YXRlIiwiY291bnRyeSIsImxpbmUxIiwibGluZTIiLCJsaW5lMyIsInBvc3RhbF9jb2RlIiwibW9kaWZ5QmlsbGluZ0RldGFpbHNFdmVudCIsIkN1c3RvbUV2ZW50IiwiYnViYmxlcyIsImRldGFpbCIsInByb3ZpZGVyIiwiYmlsbGluZ19kZXRhaWxzIiwiaGFuZGxlIiwiZ2V0RmllbGROYW1lIiwiJGZpZWxkcyIsImdldEZvcm1GaWVsZCIsImZvckVhY2giLCJ0eXBlIiwiY2hlY2tlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCIkbXVsdGlGaWVsZHMiLCJsZW5ndGgiLCJyZXBsYWNlIiwic3BsaXQiLCJqb2luIiwid2luZG93Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/payments/payment-provider.js\n");

/***/ }),

/***/ "./src/js/utils/utils.js":
/*!*******************************!*\
  !*** ./src/js/utils/utils.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"eventKey\": () => (/* binding */ eventKey),\n/* harmony export */   \"isEmpty\": () => (/* binding */ isEmpty),\n/* harmony export */   \"toBoolean\": () => (/* binding */ toBoolean)\n/* harmony export */ });\nvar isEmpty = function isEmpty(obj) {\n  return obj && Object.keys(obj).length === 0 && obj.constructor === Object;\n};\nvar toBoolean = function toBoolean(val) {\n  return !/^(?:f(?:alse)?|no?|0+)$/i.test(val) && !!val;\n};\nvar eventKey = function eventKey(eventName) {\n  var namespace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (!namespace) {\n    namespace = Math.random().toString(36).substr(2, 5);\n  }\n\n  return \"\".concat(eventName, \".\").concat(namespace);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvdXRpbHMvdXRpbHMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sSUFBTUEsT0FBTyxHQUFHLFNBQVZBLE9BQVUsQ0FBU0MsR0FBVCxFQUFjO0VBQ2pDLE9BQU9BLEdBQUcsSUFBSUMsTUFBTSxDQUFDQyxJQUFQLENBQVlGLEdBQVosRUFBaUJHLE1BQWpCLEtBQTRCLENBQW5DLElBQXdDSCxHQUFHLENBQUNJLFdBQUosS0FBb0JILE1BQW5FO0FBQ0gsQ0FGTTtBQUlBLElBQU1JLFNBQVMsR0FBRyxTQUFaQSxTQUFZLENBQVNDLEdBQVQsRUFBYztFQUNuQyxPQUFPLENBQUMsMkJBQTJCQyxJQUEzQixDQUFnQ0QsR0FBaEMsQ0FBRCxJQUF5QyxDQUFDLENBQUNBLEdBQWxEO0FBQ0gsQ0FGTTtBQUlBLElBQU1FLFFBQVEsR0FBRyxTQUFYQSxRQUFXLENBQVNDLFNBQVQsRUFBc0M7RUFBQSxJQUFsQkMsU0FBa0IsdUVBQU4sSUFBTTs7RUFDMUQsSUFBSSxDQUFDQSxTQUFMLEVBQWdCO0lBQ1pBLFNBQVMsR0FBR0MsSUFBSSxDQUFDQyxNQUFMLEdBQWNDLFFBQWQsQ0FBdUIsRUFBdkIsRUFBMkJDLE1BQTNCLENBQWtDLENBQWxDLEVBQXFDLENBQXJDLENBQVo7RUFDSDs7RUFFRCxpQkFBVUwsU0FBVixjQUF1QkMsU0FBdkI7QUFDSCxDQU5NIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3V0aWxzL3V0aWxzLmpzP2Q5ZWUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGlzRW1wdHkgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqICYmIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAwICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0O1xufTtcblxuZXhwb3J0IGNvbnN0IHRvQm9vbGVhbiA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHJldHVybiAhL14oPzpmKD86YWxzZSk/fG5vP3wwKykkL2kudGVzdCh2YWwpICYmICEhdmFsO1xufTtcblxuZXhwb3J0IGNvbnN0IGV2ZW50S2V5ID0gZnVuY3Rpb24oZXZlbnROYW1lLCBuYW1lc3BhY2UgPSBudWxsKSB7XG4gICAgaWYgKCFuYW1lc3BhY2UpIHtcbiAgICAgICAgbmFtZXNwYWNlID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDUpO1xuICAgIH1cblxuICAgIHJldHVybiBgJHtldmVudE5hbWV9LiR7bmFtZXNwYWNlfWA7XG59O1xuIl0sIm5hbWVzIjpbImlzRW1wdHkiLCJvYmoiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiY29uc3RydWN0b3IiLCJ0b0Jvb2xlYW4iLCJ2YWwiLCJ0ZXN0IiwiZXZlbnRLZXkiLCJldmVudE5hbWUiLCJuYW1lc3BhY2UiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/utils/utils.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/js/payments/opayo.js");
/******/ 	
/******/ })()
;